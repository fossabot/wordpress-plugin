!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=12)}([function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return l});var r=window.selz_globals.colors,o=wp.i18n,i=o.__,a=o.sprintf,c=[{label:i("Add to cart"),value:"add-to-cart"},{label:i("Buy"),value:"buy",text:i("Buy it now")},{label:i("View"),value:"view",text:i("Buy it now")}],l={izettle:{button:i("iZettle Button"),connectAccount:a(i("Connect your %s account"),"iZettle"),connectAccountNotice:a(i("%s blocks require a connection to your account."),"iZettle Ecommerce"),store:i("iZettle Store"),widget:i("iZettle Widget")},selz:{button:i("Selz Button"),connectAccount:a(i("Connect your %s account"),"Selz"),connectAccountNotice:a(i("%s blocks require a connection to your account."),"Selz Ecommerce"),store:i("Selz Store"),widget:i("Selz Widget")}}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=window.selz_globals,l=c.embed,u=c.env,s=wp.blockEditor||wp.editor,p=s.BlockIcon,f=wp.blocks.getBlockType,d=wp.components.Placeholder,h=wp.element,m=h.Component,w=h.Fragment,y=wp.i18n.__,b=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={didRender:!1},n}return i(t,e),a(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.clientId,n=e.openGeneralSidebar;t||this.forceUpdate(),n("edit-post/block")}},{key:"getEmbedProps",value:function(){var e=this.props,t=e.attributes,n=e.deprecated,r=t.action,o=t.buttonBackgroundColor,i=t.buttonTextColor,a=t.category,c=t.checkoutBackgroundColor,l=t.checkoutTextColor,s=t.description,p=t.linksColor,f=t.logos,d=t.modal,h=t.showCategories,m=t.showPagination,w=t.showSearch,y=t.squareImages,b=t.text,g=t.truncateTitles,v=t.width,E=t.url,C={action:r,category:a,colors:{buttons:{background:o,text:i},checkout:{background:c,text:l},links:p},description:s,logos:f,modal:d,showCategories:h,showPagination:m,showSearch:w,squareImages:y,style:this.getEmbedStyle(),text:b,truncateTitles:g,url:E,width:v};return n&&delete C.category,u&&(C.env=u),JSON.stringify(C)}},{key:"getEmbedStyle",value:function(){var e=this.props.className.split(" ");return e[1]?e[1].replace("is-style-",""):"price-right"}},{key:"render",value:function(){this.state.didRender||this.setState({didRender:!0});var e=this.props,t=e.attributes,n=t.text,r=t.type,o=t.url,i=e.className,a=e.clientId,c=e.deprecated,u=e.isPreview,s=e.name;if(!o&&!a)return wp.element.createElement(d,null);if(!o){var h=f(s),m=h.icon.src,b=h.title;return wp.element.createElement(d,{icon:wp.element.createElement(p,{icon:m}),label:b},y("Hold tight while we load your products \u2026"))}var g=this.getEmbedProps();return wp.element.createElement(w,null,wp.element.createElement("div",{"data-embed":r,className:!c&&i,key:a&&this.state.didRender?g:Math.random()},wp.element.createElement("script",{type:"text/props"},g)),!u&&wp.element.createElement(w,null,wp.element.createElement("script",{async:!0,src:l}),wp.element.createElement("noscript",null,wp.element.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer"},"store"===r?y("Shop now"):n))))}}]),t}(m);t.a=b},function(e,t){e.exports=lodash},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),c=(n.n(a),n(0)),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=wp.components,s=u.PanelBody,p=u.SelectControl,f=u.TextControl,d=u.ToggleControl,h=wp.element.Component,m=wp.i18n.__,w=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.debouncedSetText=Object(a.debounce)(n.setText,500),n}return i(t,e),l(t,[{key:"getActionText",value:function(e){var t=c.a.find(function(t){return t.value===e}),n=t.label;return t.text||n}},{key:"handleActionChange",value:function(e){var t=this.props,n=t.attributes,r=n.textWasSet,o=n.useDefaultText,i=t.setAttributes,a=this.getActionText(e),c={action:e};!1===r&&(c._text=a),(!1===r||o)&&(c.text=a),i(c)}},{key:"handleTextChange",value:function(e){this.props.setAttributes({_text:e,textWasSet:!0}),this.debouncedSetText(e)}},{key:"setText",value:function(e){this.props.setAttributes({text:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=n._text,o=n.action,i=n.modal,a=n.useDefaultText,l=t.setAttributes;return wp.element.createElement(s,{title:m("Behavior"),initialOpen:!1},wp.element.createElement(p,{label:m("Action"),value:o,options:c.a,onChange:function(t){return e.handleActionChange(t)}}),wp.element.createElement(p,{label:m("Window Type"),value:i,options:[{label:m("Overlay"),value:!0},{label:m("New Tab"),value:!1}],onChange:function(e){return l({modal:"true"===e})}}),wp.element.createElement(f,{label:m("Text"),value:r,onChange:function(t){return e.handleTextChange(t)},disabled:a}),wp.element.createElement(d,{label:m("Use Default Text"),checked:a,onChange:function(){return l({useDefaultText:!a,text:a?r:e.getActionText(o)})}}))}}]),t}(h);t.a=w},function(e,t,n){"use strict";var r=wp.blockEditor||wp.editor,o=r.ContrastChecker,i=r.PanelColorSettings,a=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,r=t.buttonBackgroundColor,c=t.buttonTextColor;return wp.element.createElement(i,{title:a("Button Colors"),initialOpen:!1,colorSettings:[{value:r,onChange:function(e){return n({buttonBackgroundColor:e})},label:a("Background Color")},{value:c,onChange:function(e){return n({buttonTextColor:e})},label:a("Text Color")}]},wp.element.createElement(o,{backgroundColor:r,textColor:c}))}},function(e,t,n){"use strict";var r=wp.blockEditor||wp.editor,o=r.ContrastChecker,i=r.PanelColorSettings,a=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,r=t.checkoutBackgroundColor,c=t.checkoutTextColor;return wp.element.createElement(i,{title:a("Checkout Colors"),initialOpen:!1,colorSettings:[{value:r,onChange:function(e){return n({checkoutBackgroundColor:e})},label:a("Background Color")},{value:c,onChange:function(e){return n({checkoutTextColor:e})},label:a("Text Color")}]},wp.element.createElement(o,{backgroundColor:r,textColor:c}))}},function(e,t,n){"use strict";var r=n(7),o=wp.components,i=o.PanelBody,a=o.ToggleControl,c=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,o=t.description,l=t.logos,u=t.type;return wp.element.createElement(i,{title:c("Display"),initialOpen:!1},"widget"===u&&wp.element.createElement(a,{label:c("Show Description"),checked:o,onChange:function(){return n({description:!o})}}),wp.element.createElement(a,{label:c("Show Payment Logos"),checked:l,onChange:function(){return n({logos:!l})}}),wp.element.createElement(r.a,{attributes:t,setAttributes:n}))}},function(e,t,n){"use strict";var r=wp.components.ToggleControl,o=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,i=t.showCart;return wp.element.createElement(r,{label:o("Show Cart"),help:o("Preview your shopping cart."),checked:i,onChange:function(){n({showCart:!i}),document.body.classList.toggle("cart-visible")}})}},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=n(2),l=(n.n(c),n(17)),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=wp.components,f=p.PanelBody,d=p.TextControl,h=wp.element.Component,m=wp.i18n.__,w=function(e){function t(e){o(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.debouncedSearchProducts=Object(c.debounce)(n.searchProducts,500),n}return a(t,e),s(t,[{key:"componentDidMount",value:function(){this.fetchProducts(this.props.attributes.currentPage)}},{key:"componentWillUnmount",value:function(){this.debouncedSearchProducts.cancel()}},{key:"fetchProducts",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=this.props,o=n.attributes,i=o.pages,a=o.url,c=n.setAttributes,l=this.getRequest(t);c({request:l}),fetch(l.url).then(function(e){return e.json()}).then(function(n){var o=n.data,u=n.has_more;if(e.props.attributes.request.timestamp===l.timestamp){var s=o.filter(function(e){return e.short_url}),p={isLoading:!1,products:s,hasMore:u};s&&s.length&&(p.url=a||s[0].short_url,p.pages=Object.assign({},i,r({},t,{number:t,start:s[0].id,end:s[s.length-1].id})),p.currentPage=t),c(p)}},function(e){return c({isLoading:!1,error:e})})}},{key:"getRequest",value:function(e){var t=this.props.attributes,n=t.pages,r=t.query,o={action:"selz_"+(r?"search":"get")+"_products",starting_after:1!==e?n[e-1].end:null,page:e,q:r};return{data:o,url:this.getUrl(o),timestamp:Date.now()}}},{key:"getUrl",value:function(e){var t=window,n=t.ajaxurl;return Object.keys(e).reduce(function(t,r){return e[r]?t+(t===n?"?":"&")+r+"="+e[r]:t},n)}},{key:"handleQueryChange",value:function(e){this.props.setAttributes({query:e,error:null}),this.debouncedSearchProducts()}},{key:"next",value:function(){this.searchProducts(this.props.attributes.currentPage+1)}},{key:"previous",value:function(){this.searchProducts(this.props.attributes.currentPage-1)}},{key:"searchProducts",value:function(e){this.props.setAttributes({isLoading:!0}),this.fetchProducts(e)}},{key:"render",value:function(){var e=this,t=this.props;return wp.element.createElement(f,{title:m("Product")},wp.element.createElement(d,{label:m("Search Products"),type:"search",value:t.attributes.query,className:"is-filter",onChange:function(t){return e.handleQueryChange(t)}}),wp.element.createElement(l.a,u({},t,{next:function(){return e.next()},previous:function(){return e.previous()}})))}}]),t}(h);t.a=w},function(e,t,n){"use strict";function r(e){var t=e.label,n=e.className,r=e.selected,o=e.help,u=e.instanceId,s=e.onChange,p=e.options,f=void 0===p?[]:p,d="inspector-radio-control-"+u,h=function(e){return s(e.target.value)};return!Object(a.isEmpty)(f)&&wp.element.createElement(l,{label:t,id:d,help:o,className:i()(n,"components-radio-control")},f.map(function(e,t){return wp.element.createElement("div",{key:d+"-"+t,className:"components-radio-control__option has-image"},wp.element.createElement("input",{id:d+"-"+t,className:"components-radio-control__input",type:"radio",name:d,value:e.value,onChange:h,checked:e.value===r,"aria-describedby":o?d+"__help":void 0}),wp.element.createElement("label",{htmlFor:d+"-"+t},wp.element.createElement(c.a,{src:e.image})," ",e.label))}))}var o=n(18),i=n.n(o),a=n(2),c=(n.n(a),n(19)),l=wp.components.BaseControl,u=wp.compose.withInstanceId;t.a=u(r)},function(e,t,n){"use strict";t.a=function(e){var t=e.ariaLabel,n=e.children;return wp.element.createElement("div",{className:"components-scroll",tabIndex:"0",role:"group","aria-label":t},n)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(2),c=(n.n(a),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),l=wp.components,u=l.PanelBody,s=l.RangeControl,p=l.ToggleControl,f=wp.element.Component,d=wp.i18n.__,h=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.debouncedSetWidth=Object(a.debounce)(n.setWidth,200),n}return i(t,e),c(t,[{key:"handleWidthChange",value:function(e){this.props.setAttributes({_width:e}),this.debouncedSetWidth(e)}},{key:"setWidth",value:function(e){this.props.setAttributes({width:String(e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=n._width,o=n.autoWidth,i=n.fluidWidth,a=n.type,c=t.setAttributes;return wp.element.createElement(u,{title:d("Width"),initialOpen:!1},"button"===a&&wp.element.createElement(p,{label:d("Automatic"),checked:o,onChange:function(){return c({autoWidth:!o,width:o?r:null})}}),!o&&wp.element.createElement(p,{label:d("Fluid (100%)"),checked:i,onChange:function(){return c({fluidWidth:!i,width:i?r:"100%"})}}),!o&&!i&&wp.element.createElement(s,{value:r,onChange:function(t){return e.handleWidthChange(t)},min:160,max:1e3,step:5}))}}]),t}(f);t.a=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(13),i=(n.n(o),n(14)),a=n(20),c=n(30),l=n(33),u=(n.n(l),n(34)),s=(n.n(u),r.c.selz),p=s.connectAccount,f=s.connectAccountNotice,d=wp.blocks.registerBlockType,h=wp.data.dispatch,m=wp.url.addQueryArgs;window.selz_globals.store?[i.a,a.a,c.a].forEach(function(e){var t=e.name,n=e.settings;d(t,n)}):h("core/notices").createInfoNotice(f,{actions:[{label:p,url:m("admin-post.php",{action:"connect_selz"})}]})},function(e,t,n){var r=wp.blockEditor||wp.editor,o=r.InspectorAdvancedControls,i=wp.blocks.hasBlockSupport,a=wp.components.TextControl,c=wp.compose.createHigherOrderComponent,l=wp.element.Fragment,u=wp.hooks,s=u.addFilter,p=u.removeFilter,f=wp.i18n.__;p("editor.BlockEdit","core/editor/custom-class-name/with-inspector-control"),s("editor.BlockEdit","selz/with-inspector-controls",c(function(e){return function(t){var n=t.attributes.className,r=t.isSelected,c=t.name,u=t.setAttributes,s=i(c,"customClassName",!0),p=c.startsWith("selz");return s&&r&&!p?wp.element.createElement(l,null,wp.element.createElement(e,t),wp.element.createElement(o,null,wp.element.createElement(a,{label:f("Additional CSS Class"),value:n||"",onChange:function(e){return u({className:e})}}))):wp.element.createElement(e,t)}},"withInspectorControls"))},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(1),i=n(15),a=n(16),c=n(0),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=wp.components,s=u.G,p=u.Rect,f=u.SVG,d=wp.blocks,h=d.createBlock,m=d.getBlockAttributes,w=wp.i18n.__;t.a={name:"selz/button",settings:{title:c.c.selz.button,description:w("Prompt visitors to add to cart, buy now or view a store item."),category:"selz-ecommerce",icon:wp.element.createElement(f,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement(s,{fill:"none",transform:"translate(2 6)"},wp.element.createElement(p,{width:"20",height:"11",fill:c.b.primary,rx:"2"}),wp.element.createElement(p,{width:"7",height:"3",x:"3",y:"4",fill:"#FFF",rx:"1.5"}),wp.element.createElement(p,{width:"5",height:"3",x:"12",y:"4",fill:"#FFF",rx:"1.5"}))),styles:[{name:"price-right",label:w("Default"),isDefault:!0},{name:"price-left",label:w("Price Left")},{name:"price-above",label:w("Price Above")},{name:"price-below",label:w("Price Below")}],attributes:i.a,transforms:{to:[{type:"block",blocks:["selz/widget"],transform:function(e){var t=(e.autoWidth,r(e,["autoWidth"])),n=m("selz/widget"),o=n.description,i=n.type,a=n.width;return h("selz/widget",Object.assign({},t,{description:o,type:i,width:a}))}}]},edit:a.a,save:function(e){return wp.element.createElement(o.a,e)},deprecated:[{attributes:i.a,save:function(e){return wp.element.createElement(o.a,l({},e,{deprecated:!0}))}}]}}},function(e,t,n){"use strict";var r=n(0),o=r.a[0],i=o.label,a=o.text,c=o.value,l=a||i,u=r.b.primary,s=r.b.white;t.a={_text:{type:"string",default:l},_width:{type:"number",default:320},action:{type:"string",default:c},autoWidth:{type:"boolean",default:!0},buttonBackgroundColor:{type:"string",default:u},buttonTextColor:{type:"string",default:s},checkoutBackgroundColor:{type:"string",default:u},checkoutTextColor:{type:"string",default:s},currentPage:{type:"number"},error:{type:"object"},fluidWidth:{type:"boolean",default:!1},hasMore:{type:"boolean"},isLoading:{type:"boolean",default:!0},logos:{type:"boolean",default:!1},modal:{type:"boolean",default:!0},pages:{type:"object"},products:{type:"array"},query:{type:"string",default:""},request:{type:"object"},showCart:{type:"boolean",default:!1},text:{type:"string",default:l},textWasSet:{type:"boolean",default:!1},type:{type:"string",default:"button"},url:{type:"string"},useDefaultText:{type:"boolean",default:!1},width:{type:"string"}}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.openGeneralSidebar,n=r(e,["openGeneralSidebar"]);return wp.element.createElement(w,null,wp.element.createElement(u.a,f({},n,{openGeneralSidebar:t,isPreview:!0})),wp.element.createElement(h,null,wp.element.createElement(s.a,n),wp.element.createElement(i.a,n),wp.element.createElement(p.a,n),wp.element.createElement(l.a,n),wp.element.createElement(a.a,n),wp.element.createElement(c.a,n)))}var i=n(3),a=n(4),c=n(5),l=n(6),u=n(1),s=n(8),p=n(11),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=wp.blockEditor||wp.editor,h=d.InspectorControls,m=wp.data.withDispatch,w=wp.element.Fragment;t.a=m(function(e){return{openGeneralSidebar:e("core/edit-post").openGeneralSidebar}})(o)},function(e,t,n){"use strict";var r=n(9),o=n(10),i=wp.components,a=i.Button,c=i.Notice,l=i.Spinner,u=wp.element.Fragment,s=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.next,i=e.previous,p=e.setAttributes,f=t.currentPage,d=t.error,h=t.hasMore,m=t.isLoading,w=t.products,y=t.request,b=t.url;return d?wp.element.createElement(c,{status:"error",isDismissible:!1},s("Failed to load products. Please try again.")):m?wp.element.createElement("div",{style:{textAlign:"center"}},wp.element.createElement(l,null)):w&&w.length?wp.element.createElement(u,null,wp.element.createElement(o.a,{ariaLabel:s("Products")},wp.element.createElement(r.a,{selected:b,options:w.map(function(e){var t=e.title,n=e.short_url,r=e.featured_image;return{label:t,value:n,image:r&&r.small}}),onChange:function(e){return p({url:e})}})),(1!==f||h)&&wp.element.createElement("div",{className:"components-pager"},wp.element.createElement(a,{isLink:!0,onClick:i,disabled:1===f},s("Prev")),wp.element.createElement(a,{isLink:!0,onClick:n,disabled:!h},s("Next")))):wp.element.createElement(c,{status:"info",isDismissible:!1},s(y.data.q?"No matches found":"No products found"))}},function(e,t,n){var r,o;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)&&r.length){var a=n.apply(null,r);a&&e.push(a)}else if("object"===o)for(var c in r)i.call(r,c)&&r[c]&&e.push(c)}}return e.join(" ")}var i={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?(n.default=n,e.exports=n):(r=[],void 0!==(o=function(){return n}.apply(t,r))&&(e.exports=o))}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=wp.components,l=c.G,u=c.Path,s=c.SVG,p=wp.element.Component,f=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={className:"is-loading"},n}return i(t,e),a(t,[{key:"setClassName",value:function(e){var t=e.target,n=t.naturalWidth,r=t.naturalHeight;n>r?this.setState({className:"is-landscape"}):r>n?this.setState({className:"is-portrait"}):r===n?this.setState({className:"is-square"}):this.setState({className:""})}},{key:"render",value:function(){var e=this,t=this.props.src;return wp.element.createElement("span",{className:"product-image media-placeholder media-ratio-1-1",role:"presentation"},t?wp.element.createElement("img",{className:this.state.className,src:t,alt:"",onLoad:function(t){return e.setClassName(t)},onError:function(t){return e.setClassName(t)}}):wp.element.createElement(s,{viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement(l,{fill:"none"},wp.element.createElement(u,{fill:"#DBE3E8",d:"M0 0h64v64H0z"}),wp.element.createElement(u,{fill:"#FFF",d:"M47.84 34.293L29.707 16.16a.484.484 0 0 0-.374-.16h-12.8c-.32 0-.533.213-.533.533v12.8c0 .16.053.267.16.374L34.293 47.84c.107.107.267.16.374.16a.576.576 0 0 0 .373-.16l12.8-12.8a.516.516 0 0 0 0-.747zM24 26.133A2.14 2.14 0 0 1 21.867 24 2.14 2.14 0 0 1 24 21.867 2.14 2.14 0 0 1 26.133 24 2.14 2.14 0 0 1 24 26.133z"}))))}}]),t}(p);t.a=f},function(e,t,n){"use strict";var r=n(1),o=n(21),i=n(22),a=n(0),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=a.b.primary,u=wp.components,s=u.G,p=u.Path,f=u.Rect,d=u.SVG,h=wp.i18n.__;t.a={name:"selz/store",settings:{title:a.c.selz.store,description:h("Embed your whole store."),category:"selz-ecommerce",icon:wp.element.createElement(d,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement(s,{fill:"none",fillRule:"evenodd",transform:"translate(2 2)"},wp.element.createElement(s,{transform:"translate(11 11)"},wp.element.createElement(f,{width:"8",height:"8",x:".5",y:".5",stroke:"#DBE3E8",rx:"1"}),wp.element.createElement(p,{fill:"#DBE3E8",fillOpacity:".5",fillRule:"nonzero",d:"M1 0h7a1 1 0 0 1 1 1v4H0V1a1 1 0 0 1 1-1z"}),wp.element.createElement(f,{width:"2",height:"1",x:"2",y:"6",fill:l,fillRule:"nonzero",rx:".5"}),wp.element.createElement(f,{width:"2",height:"1",x:"5",y:"6",fill:l,fillRule:"nonzero",rx:".5"})),wp.element.createElement(s,{transform:"translate(0 11)"},wp.element.createElement(f,{width:"8",height:"8",x:".5",y:".5",stroke:"#DBE3E8",rx:"1"}),wp.element.createElement(p,{fill:"#DBE3E8",fillOpacity:".5",fillRule:"nonzero",d:"M1 0h7a1 1 0 0 1 1 1v4H0V1a1 1 0 0 1 1-1z"}),wp.element.createElement(f,{width:"2",height:"1",x:"2",y:"6",fill:l,fillRule:"nonzero",rx:".5"}),wp.element.createElement(f,{width:"2",height:"1",x:"5",y:"6",fill:l,fillRule:"nonzero",rx:".5"})),wp.element.createElement(s,{transform:"translate(11)"},wp.element.createElement(f,{width:"8",height:"8",x:".5",y:".5",stroke:"#DBE3E8",rx:"1"}),wp.element.createElement(p,{fill:"#DBE3E8",fillOpacity:".5",fillRule:"nonzero",d:"M1 0h7a1 1 0 0 1 1 1v4H0V1a1 1 0 0 1 1-1z"}),wp.element.createElement(f,{width:"2",height:"1",x:"2",y:"6",fill:l,fillRule:"nonzero",rx:".5"}),wp.element.createElement(f,{width:"2",height:"1",x:"5",y:"6",fill:l,fillRule:"nonzero",rx:".5"})),wp.element.createElement(f,{width:"8",height:"8",x:".5",y:".5",stroke:"#DBE3E8",rx:"1"}),wp.element.createElement(p,{fill:"#DBE3E8",fillOpacity:".5",fillRule:"nonzero",d:"M1 0h7a1 1 0 0 1 1 1v4H0V1a1 1 0 0 1 1-1z"}),wp.element.createElement(f,{width:"2",height:"1",x:"2",y:"6",fill:l,fillRule:"nonzero",rx:".5"}),wp.element.createElement(f,{width:"2",height:"1",x:"5",y:"6",fill:l,fillRule:"nonzero",rx:".5"}))),attributes:o.a,edit:i.a,save:function(e){return wp.element.createElement(r.a,e)},deprecated:[{attributes:o.a,save:function(e){return wp.element.createElement(r.a,c({},e,{deprecated:!0}))}}]}}},function(e,t,n){"use strict";var r=n(0),o=r.a[0],i=o.label,a=o.text,c=o.value,l=a||i,u=r.b.primary,s=r.b.white;t.a={_text:{type:"string",default:l},action:{type:"string",default:c},buttonBackgroundColor:{type:"string",default:u},buttonTextColor:{type:"string",default:s},categories:{type:"array"},category:{type:"string",default:""},checkoutBackgroundColor:{type:"string",default:u},checkoutTextColor:{type:"string",default:s},error:{type:"object"},isLoading:{type:"boolean",default:!0},linksColor:{type:"string",default:u},modal:{type:"boolean",default:!0},query:{type:"string",default:""},showCart:{type:"boolean",default:!1},showCategories:{type:"boolean",default:!0},showPagination:{type:"boolean",default:!0},showSearch:{type:"boolean",default:!0},squareImages:{type:"boolean",default:!0},text:{type:"string",default:l},textWasSet:{type:"boolean",default:!1},truncateTitles:{type:"boolean",default:!0},type:{type:"string",default:"store"},url:{type:"string",default:"http://"+window.selz_globals.store.name},useDefaultText:{type:"boolean",default:!1}}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.openGeneralSidebar,n=r(e,["openGeneralSidebar"]);return wp.element.createElement(y,null,wp.element.createElement(u.a,d({},n,{openGeneralSidebar:t,isPreview:!0})),wp.element.createElement(m,null,wp.element.createElement(c.a,n),wp.element.createElement(i.a,n),wp.element.createElement(f.a,n),wp.element.createElement(p.a,n),wp.element.createElement(a.a,n),wp.element.createElement(s.a,n),wp.element.createElement(l.a,n)))}var i=n(3),a=n(4),c=n(23),l=n(5),u=n(1),s=n(27),p=n(28),f=n(29),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},h=wp.blockEditor||wp.editor,m=h.InspectorControls,w=wp.data.withDispatch,y=wp.element.Fragment;t.a=w(function(e){return{openGeneralSidebar:e("core/edit-post").openGeneralSidebar}})(o)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=n(24),c=n(26),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=wp.components,s=u.PanelBody,p=u.TextControl,f=wp.element.Component,d=wp.i18n.__,h=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),l(t,[{key:"componentDidMount",value:function(){var e=window.selz_globals,t=e.env,n=e.store,r=n.id;this.client=new a.a({env:t,store:Number(r)}),this.fetchCategories()}},{key:"fetchCategories",value:function(){var e=this.props,t=e.attributes.category,n=e.setAttributes;this.client.getCategories().then(function(e){var r=e.categories.sort(function(e){return"all"===e.slug?-1:0});r[0].id=t,n({isLoading:!1,categories:r,category:t||r&&r.length&&r[0].id})},function(e){return n({isLoading:!1,error:e})})}},{key:"render",value:function(){var e=this.props,t=e.attributes.query,n=e.setAttributes;return wp.element.createElement(s,{title:d("Category")},wp.element.createElement(p,{label:d("Search Categories"),type:"search",value:t,className:"is-filter",onChange:function(e){return n({query:e})}}),wp.element.createElement(c.a,e))}}]),t}(f);t.a=h},function(e,t,n){"use strict";(function(e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e,t){return s(e)||p(e,t)||f()}function s(e){if(Array.isArray(e))return e}function p(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(e){return JSON.parse(JSON.stringify(e))}function h(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!n.length)return e;var o=n.shift();return q.object(o)?(Object.keys(o).forEach(function(t){q.object(o[t])?(!Object.keys(e).includes(t)&&Object.assign(e,a({},t,{})),h(e[t],o[t])):Object.assign(e,a({},t,o[t]))}),h.apply(void 0,[e].concat(n))):e}function m(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(t,n){try{t(JSON.parse(e))}catch(e){n(e)}})}function w(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";return e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),n.toString())}function y(){return(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString().replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})}function b(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"").toString();return e=w(e,"-"," "),e=w(e,"_"," "),w(e=y(e)," ","")}function g(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=h({},re,t),r=n.type,o=n.body,i=n.responseType;return new Promise(function(t,n){try{var a=new XMLHttpRequest;if(!("withCredentials"in a)){var c=new Error("No CORS support");throw c.request=a,c}var l=function(){var e=new Error(a.status);e.request=a,n(e)};a.addEventListener("load",function(){var e=a.response;return 400<=a.status?void l():void("json"===i?m(e).then(function(e){if(e.success){var r=te.camelizeKeys(e.data);t(r)}else{var o=new Error("Request failed");o.errors=e.errors,n(o)}}).catch(n):t(e))}),a.addEventListener("error",l),a.open(r,e,!0),"json"!==i&&(a.responseType=i),a.send(ne(o))}catch(e){n(e)}})}function v(e){return q.array(e)?e.filter(function(t,n){return e.indexOf(t)===n}):e}function E(e){var t=e;/^https?:\/\/*/.test(e)||(t="http://".concat(e));try{return new URL(t)}catch(e){return null}}var C=function(e){return null!=e?e.constructor:null},k=function(e,t){return!!(e&&t&&e instanceof t)},O=function(e){return Array.isArray(e)},j=function(e){return C(e)===Object},x=function(e){return C(e)===Number&&!Number.isNaN(e)},S=function(e){return C(e)===String},_=function(e){return C(e)===Boolean},P=function(e){return C(e)===Function},A=function(e){return null==e},T=function(e){return S(e)&&/^[a-f\d]{24}$/i.test(e)},z=function(e){return S(e)&&/^[A-z]{3}$/.test(e)},B=function(e){return A(e)||(S(e)||O(e))&&!e.length||j(e)&&!Object.keys(e).length},I=function(e){var t=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];if(k(e,window.URL))return!0;var n=e;t||/^https?:\/\/*/.test(e)||(n="http://".concat(e));try{return!B(new URL(n).hostname)}catch(e){return!1}},q={array:O,object:j,number:x,string:S,boolean:_,function:P,nullOrUndefined:A,objectId:T,currencyCode:z,url:I,empty:B},N=function e(t){r(this,e),Object.assign(this,t)},D=function e(t){r(this,e),Object.assign(this,t)},R=function e(t){r(this,e),Object.assign(this,t),this.cover=new D(t.cover)},F=function e(t){r(this,e),Object.assign(this,t)},L=function e(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";r(this,e),Object.assign(this,t),this.selected=t.id===n},W=function e(t,n){r(this,e),this.id=t,this.label=n},G=function e(t){r(this,e),Object.assign(this,t),this.options=Object.keys(t.options).map(function(e){return new W(e,t.options[e])})},U=null,M=function(){function e(t,n){var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"";if(r(this,e),q.object(n)){if(U=t,Object.assign(this,n),this.store=U.store,q.object(n.urls)&&(this.urls=new F(n.urls)),q.object(n.media)&&(this.media=new R(n.media)),q.array(n.images)&&(this.images=n.images.map(function(e){return new D(e)})),q.array(n.files)&&(this.files=n.files.map(function(e){return new N(e)})),n.hasVariants){var i=q.empty(o)?n.variants[0].id:o;this.variants=n.variants.map(function(e){return new L(e,i)})}n.hasVariantAttributes&&(this.variantAttributes=n.variantAttributes.map(function(e){return new G(e)}))}}return i(e,[{key:"selectedVariant",get:function(){return q.empty(this.variants)?null:this.variants.find(function(e){return e.selected})}}]),e}(),V=function e(t,n,o){r(this,e),this.cartId=o,Object.assign(this,n),this.product=new M(t,n.product,n.variantId)},H=null,J=function(){function e(t,n){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];r(this,e),null===n||(H=t,Object.assign(this,n),this.store=H.store,this.active=o,this.items=Array.from(n.items).map(function(e){return new V(H,e,n.id)}))}return i(e,[{key:"add",value:function(e){return H.addToCart(this.id,e)}},{key:"remove",value:function(e){return H.removeFromCart(this.id,e)}}]),e}(),K=function(e){return!q.empty(e)&&e instanceof M},Q=function e(t){r(this,e),this.productId=null,this.variantId=null,this.quantity=1,this.discountCode=null,this.buyersUnitPrice=null,(K(t)||q.object(t))&&(this.productId=t.id,this.variantId=q.objectId(t.variant)?t.variant:null)},Z=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,e),q.object(t)&&Object.assign(this,t)},$=function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;r(this,e),q.object(t)&&Object.assign(this,t)},X=function(e){return"https://".concat(q.empty(e)||"selz.com"===e?"sdk.selz.com":"".concat(e,"/sdk"),"/")},Y={urls:{product:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"products/find?url=").concat(t)},products:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"",r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:1;return"".concat(X(e),"products/all/").concat(t,"?q=").concat(n,"&c=").concat(r,"&p=").concat(o)},categories:function(e,t){return"".concat(X(e),"categories/").concat(t)},store:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return q.number(t)?"".concat(X(e),"store/find/").concat(t):"".concat(X(e),"store/find?url=").concat(t)},buy:function(e){return"".concat(X(e),"cart/buy")},createCart:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/create/").concat(t)},getCart:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/").concat(t)},checkCarts:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/verify?ids=").concat(t)},addToCart:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/add/").concat(t)},updateCartItemQuantity:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/updateitemquantity/").concat(t)},removeFromCart:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";return"".concat(X(e),"cart/remove/").concat(t)}}},ee="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{},te=function(e,t){return e(t={exports:{}},t.exports),t.exports}(function(e){var t,n,r,o,i,a,c,l,u,s,p,f,d,h,m;t=ee,n=function(e,t,r){if(!l(t)||s(t)||p(t)||f(t)||c(t))return t;var o,i=0,a=0;if(u(t))for(o=[],a=t.length;i<a;i++)o.push(n(e,t[i],r));else for(var d in o={},t)Object.prototype.hasOwnProperty.call(t,d)&&(o[e(d,r)]=n(e,t[d],r));return o},r=function(e){return d(e)?e:(e=e.replace(/[\-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""})).substr(0,1).toLowerCase()+e.substr(1)},o=function(e){var t=r(e);return t.substr(0,1).toUpperCase()+t.substr(1)},i=function(e,t){return function(e,t){var n=(t=t||{}).separator||"_",r=t.split||/(?=[A-Z])/;return e.split(r).join(n)}(e,t).toLowerCase()},a=Object.prototype.toString,c=function(e){return"function"==typeof e},l=function(e){return e===Object(e)},u=function(e){return"[object Array]"==a.call(e)},s=function(e){return"[object Date]"==a.call(e)},p=function(e){return"[object RegExp]"==a.call(e)},f=function(e){return"[object Boolean]"==a.call(e)},d=function(e){return(e-=0)==e},h=function(e,t){var n=t&&"process"in t?t.process:t;return"function"==typeof n?function(t,r){return n(t,e,r)}:e},m={camelize:r,decamelize:i,pascalize:o,depascalize:i,camelizeKeys:function(e,t){return n(h(r,t),e)},decamelizeKeys:function(e,t){return n(h(i,t),e,t)},pascalizeKeys:function(e,t){return n(h(o,t),e)},depascalizeKeys:function(){return this.decamelizeKeys.apply(this,arguments)}},e.exports?e.exports=m:t.humps=m}),ne=function(){var e,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length?arguments[1]:void 0,o=2<arguments.length?arguments[2]:void 0,i=r||new FormData,a=null;try{a=d(t)}catch(e){return i}return q.object(a)?(Object.keys(a).forEach(function(r){e=o?"".concat(o,"[").concat(r,"]"):r,"object"!==n(t[r])||t[r]instanceof File?i.append(b(e),t[r]):ne(t[r],i,r)}),i):i},re={type:"GET",body:{},responseType:"json"},oe={},ie={get:function(e){if(!Object.keys(oe).includes(e)){oe[e]=g(e);var t=function(){delete oe[e]};oe[e].then(t).catch(t)}return oe[e]},post:function(e){return g(e,{type:"POST",body:1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}})}},ae=new Map,ce=function(e){if(null===e)return null;var t=E(e);return null===t?null:"".concat(t.host).concat(t.pathname).replace(/\/$/,"")},le=function(){function e(t){r(this,e),this.config=l({keys:{root:"selz-js-sdk",carts:"carts",stores:"stores"},ttl:3600,schema:new Date("2018-07-02").getTime()},t),this.purge()}return i(e,[{key:"get",value:function(t){var n=ae.get(this.config.keys.root);if(e.supported){var r=window.localStorage.getItem(this.config.keys.root);q.empty(r)||(n=JSON.parse(r))}return q.empty(n)?null:q.empty(t)?n:Object.keys(n).includes(t)?n[t]:null}},{key:"set",value:function(t,n){var r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],o=this.get()||{};if(o[t]=r&&Object.keys(o).includes(t)?h(o[t],n):n,ae.set(this.config.keys.root,o),e.supported){o.schema=this.config.schema;try{window.localStorage.setItem(this.config.keys.root,JSON.stringify(o))}catch(e){}}}},{key:"purge",value:function(){var e=this.get();if(!q.empty(e)){if(+e.schema!==this.config.schema)return void window.localStorage.removeItem(this.config.keys.root);var t=this.get(this.config.keys.stores)||[];q.empty(t)||this.set(this.config.keys.stores,t.filter(function(e){var t=+e.ttl;return 0<t&&t>Date.now()}))}}},{key:"getCarts",value:function(e){var t=this.get(this.config.keys.carts)||{};return q.empty(t)?null:q.number(e)?Object.keys(t).includes(e.toString())?t[e.toString()]:null:t}},{key:"getCart",value:function(e,t){var n=this.getCarts(e);return q.empty(n)?null:q.string(t)?Object.keys(n).includes(t.toUpperCase())?n[t.toUpperCase()]:null:n}},{key:"setCart",value:function(e,t,n){this.set(this.config.keys.carts,a({},e,a({},t.toUpperCase(),{id:n.id,active:n.active})),!0)}},{key:"setCarts",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.set(this.config.keys.carts,a({},e,t))}},{key:"getStore",value:function(e){var t=null;if(!q.number(e)&&!q.url(e))return null;var n=this.get(this.config.keys.stores)||[];if(q.number(e))t=n.find(function(t){return q.object(t.data)&&t.data.id===e});else if(q.url(e)){var r=ce(e);if(null===r)return null;t=n.find(function(e){return q.array(e.urls)&&e.urls.includes(r)})}if(!q.object(t))return null;var o=+t.ttl;return 0<o&&o<Date.now()?(this.purge(),null):new $(t.data)}},{key:"setStore",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=ce(t),r=this.get(this.config.keys.stores)||[],o=null;q.empty(r)||(o=r.find(function(t){return t.data.id===e.id}));var i=Date.now()+this.config.ttl;if(q.object(o)){if(Object.assign(o,{data:e,ttl:i}),null!==n){q.array(o.urls)?o.urls.push(n):o.urls=[n];var a=v(o.urls);Object.assign(o,{urls:a})}}else{var c={data:e,ttl:i};null!==n&&Object.assign(c,{urls:[n]}),r.push(c)}this.set(this.config.keys.stores,r)}}],[{key:"supported",get:function(){if(!window.localStorage)return!1;try{return window.localStorage.setItem("___test","___test"),window.localStorage.removeItem("___test"),!0}catch(e){return!1}}}]),e}(),ue=function(){function e(t){r(this,e);var n=t.env,o=t.store,i=t.source;if(this.env=q.empty(n)?"":n,this.store=o,this.source=i,!q.url(o)&&!q.number(o))throw Error("A store ID or URL is required to create a client");this.storage=new le}return i(e,[{key:"getStoreId",value:function(){var e=this;return new Promise(function(t,n){return q.number(e.store)?void t(e.store):e.store instanceof $?void t(e.store.id):(!q.url(e.store)&&n(new Error("Url is required for user lookup")),void e.getStore().then(function(e){t(e.id)}).catch(n))})}},{key:"getStore",value:function(){var e=this;return new Promise(function(t,n){if(q.number(e.store)||q.url(e.store)){var r=e.storage.getStore(e.store);if(null!==r&&r instanceof $)return void t(r)}if(e.store instanceof $)t(e.store);else{var o=Y.urls.store(e.env,e.store);ie.get(o).then(function(n){e.setStore(n),t(e.store)}).catch(n)}})}},{key:"setStore",value:function(e){if(q.object(e)){var t=q.url(this.store)?this.store:null;this.store=new $(e),this.storage.setStore(this.store,t)}}},{key:"getProduct",value:function(e){var t=this;return new Promise(function(n,r){ie.get(Y.urls.product(t.env,e)).then(function(e){t.store instanceof $||t.setStore(e.store),n(new M(t,e))}).catch(r)})}},{key:"getProducts",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(o,i){e.getStoreId().then(function(a){ie.get(Y.urls.products(e.env,a,q.empty(t)?"":t,q.string(n)?n:"",!q.number(r)||1>r?1:r)).then(function(t){o(l({},t,{products:t.products.map(function(t){return new M(e,t)})}))}).catch(i)}).catch(i)})}},{key:"getCategories",value:function(){var e=this;return new Promise(function(t,n){e.getStoreId().then(function(r){ie.get(Y.urls.categories(e.env,r)).then(function(e){t(l({},e,{categories:e.categories.map(function(e){return new Z(e)})}))}).catch(n)}).catch(n)})}},{key:"buy",value:function(e){var t=this;return new Promise(function(n,r){if(q.empty(e))r(new Error("A cart item is required"));else{var o=e;(q.object(e)||e instanceof M)&&(o=new Q(e)),o instanceof Q||r(new Error("A valid cart item is required")),ie.post(Y.urls.buy(t.env),o).then(function(e){var r=new J(t,e,!0);t.setStore(r.store),n(r)}).catch(r)}})}},{key:"createCart",value:function(e,t){var n=this;return new Promise(function(r,o){return q.empty(e)?void o(new Error("currency is required")):void n.getStoreId().then(function(i){var a=e.toUpperCase();ie.post(Y.urls.createCart(n.env,i),{currency:a,discount:q.empty(t)?null:t,source:n.source}).then(function(e){var t=new J(n,e);n.storage.setCart(i,a,t),r(t)}).catch(o)}).catch(o)})}},{key:"getCartId",value:function(e){var t=this;return new Promise(function(n,r){return q.currencyCode(e)?void t.getStoreId().then(function(o){var i=e.toUpperCase(),a=t.storage.getCart(o,i);q.empty(a)?t.createCart(i).then(function(e){return n(e.id)}).catch(r):n(a.id)}).catch(r):void r(new Error("A valid currency code is required"))})}},{key:"getCart",value:function(e){var t=this;return new Promise(function(n,r){var o=q.currencyCode(e),i=q.objectId(e);if(o||i)if(o){var a=e.toUpperCase();t.getCartId(a).then(function(e){return q.empty(e)?void r(new Error("Could not find matching cart for currency code '".concat(a,"'"))):void t.getCart(e).then(function(e){t.setStore(e.store),n(e)}).catch(r)}).catch(r)}else ie.get(Y.urls.getCart(t.env,e)).then(function(e){var r=t.getActiveCart(),o=new J(t,e,e.id===r);t.setStore(o.store),n(o)}).catch(r);else r(new Error("A valid currency code or cart id are required"))})}},{key:"getCarts",value:function(){var e=this,t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];return new Promise(function(n,r){e.getStoreId().then(function(o){var i=e.storage.getCarts(o);if(q.empty(i))n(null);else if(t){var a=Object.keys(i).map(function(e){return i[e].id});ie.get(Y.urls.checkCarts(e.env,a.join(","))).then(function(t){Object.entries(t).forEach(function(e){var t=u(e,2),n=t[0];if(!t[1]){var r=Object.keys(i).find(function(e){return i[e].id===n});delete i[r]}}),e.storage.setCarts(o,i),Object.values(i).find(function(e){return e.active})?n(i):e.setActiveCart().then(n).catch(r)}).catch(r)}else n(i)}).catch(r)})}},{key:"setActiveCart",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return new Promise(function(n,r){e.getStoreId().then(function(o){e.getCarts(!1).then(function(i){var a=i;if(q.empty(a))n(null);else{if(q.currencyCode(t)){var c=t.toUpperCase(),l=Object.keys(a);if(!l.includes(c))return void r(new Error("No carts for ".concat(c)));l.forEach(function(e){a[e].active=e===c})}else{var u=q.objectId(t)?t:a[Object.keys(a)[0]].id;Object.keys(a).forEach(function(e){var t=a[e];t.active=t.id===u})}e.storage.setCarts(o,a),n(a)}})}).catch(r)})}},{key:"getActiveCart",value:function(){var e=this,t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];return new Promise(function(n,r){e.getStoreId().then(function(o){var i=e.storage.getCarts(o);if(Object.keys(i).length){var a=Object.values(i).find(function(e){return e.active});return a?t?void e.getCart(a.id).then(n).catch(r):void n(a.id):void n(null)}n(null)}).catch(r)})}},{key:"addToCart",value:function(e,t){var n=this;return new Promise(function(r,o){if(q.objectId(e))if(q.empty(t))o(new Error("A cart item is required"));else{var i=t;(q.object(t)||t instanceof M)&&(i=new Q(t)),i instanceof Q||o(new Error("A valid cart item is required")),ie.post(Y.urls.addToCart(n.env,e),i).then(function(e){var t=new J(n,e,!0);n.setStore(t.store),n.setActiveCart(t.id).then(function(){r(t)}).catch(o)}).catch(o)}else o(new Error("A valid id is required"))})}},{key:"updateCartItemQuantity",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;return new Promise(function(o,i){return q.objectId(e)?q.empty(t)?void i(new Error("A valid index is required")):void ie.post(Y.urls.updateCartItemQuantity(n.env,e),{index:t,quantity:r}).then(function(e){var t=new J(n,e,!0);n.setStore(t.store),n.setActiveCart(t.id).then(function(){o(t)}).catch(i)}).catch(i):void i(new Error("A valid id is required"))})}},{key:"removeFromCart",value:function(e,t){var n=this;return new Promise(function(r,o){return q.objectId(e)?q.empty(t)?void o(new Error("A valid index is required")):void ie.post(Y.urls.removeFromCart(n.env,e),{index:t}).then(function(e){if(q.empty(e))n.getCarts().then(function(){return r(null)}).catch(o);else{var t=new J(n,e,!0);n.setActiveCart(t.id).then(function(){r(t)}).catch(o)}}).catch(o):void o(new Error("A valid id is required"))})}}]),e}();t.a=ue}).call(t,n(25))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(9),o=n(10),i=wp.components,a=i.Notice,c=i.Spinner,l=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,i=t.categories,u=t.category,s=t.error,p=t.isLoading,f=t.query;return s?wp.element.createElement(a,{status:"error",isDismissible:!1},l("Failed to load categories. Please try again.")):p?wp.element.createElement("div",{style:{textAlign:"center"}},wp.element.createElement(c,null)):(f&&(i=i.filter(function(e){var t=e.title;return!f||t.toLowerCase().includes(f.toLowerCase())})),i&&i.length?wp.element.createElement(o.a,{ariaLabel:l("Categories")},wp.element.createElement(r.a,{selected:u,options:i.map(function(e){var t=e.title,n=e.id,r=e.image;return{label:t,value:n,image:r&&r.small}}),onChange:function(e){return n({category:e})}})):wp.element.createElement(a,{status:"info",isDismissible:!1},l(f?"No matches found":"No categories found")))}},function(e,t,n){"use strict";var r=wp.blockEditor||wp.editor,o=r.PanelColorSettings,i=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,r=t.linksColor;return wp.element.createElement(o,{title:i("Links Color"),initialOpen:!1,colorSettings:[{value:r,onChange:function(e){return n({linksColor:e})},label:i("Color")}]})}},function(e,t,n){"use strict";var r=wp.components,o=r.PanelBody,i=r.ToggleControl,a=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,r=t.squareImages,c=t.truncateTitles;return wp.element.createElement(o,{title:a("Options"),initialOpen:!1},wp.element.createElement(i,{label:a("Square Images"),help:a("Product images in your embed will be cropped square."),checked:r,onChange:function(){return n({squareImages:!r})}}),wp.element.createElement(i,{label:a("Truncate Titles"),help:a("Truncate product titles to improve uniformity."),checked:c,onChange:function(){return n({truncateTitles:!c})}}))}},function(e,t,n){"use strict";var r=n(7),o=wp.components,i=o.PanelBody,a=o.ToggleControl,c=wp.i18n.__;t.a=function(e){var t=e.attributes,n=e.setAttributes,o=t.showCategories,l=t.showPagination,u=t.showSearch;return wp.element.createElement(i,{title:c("Display"),initialOpen:!1},wp.element.createElement(a,{label:c("Show Categories"),checked:o,onChange:function(){return n({showCategories:!o})}}),wp.element.createElement(a,{label:c("Show Search"),checked:u,onChange:function(){return n({showSearch:!u})}}),wp.element.createElement(a,{label:c("Show Pagination"),checked:l,onChange:function(){return n({showPagination:!l})}}),wp.element.createElement(r.a,{attributes:t,setAttributes:n}))}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var o=n(1),i=n(31),a=n(32),c=n(0),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=wp.components,s=u.G,p=u.Path,f=u.Rect,d=u.SVG,h=wp.blocks,m=h.createBlock,w=h.getBlockAttributes,y=wp.i18n.__;t.a={name:"selz/widget",settings:{title:c.c.selz.widget,description:y("Feature a store item by displaying a preview with a call to action."),category:"selz-ecommerce",icon:wp.element.createElement(d,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},wp.element.createElement(s,{fill:"none",fillRule:"evenodd",transform:"translate(2 2)"},wp.element.createElement(f,{width:"19",height:"19",x:".5",y:".5",stroke:"#DBE3E8",rx:"2"}),wp.element.createElement(p,{fill:"#DBE3E8",fillOpacity:".5",fillRule:"nonzero",d:"M2 0h16a2 2 0 0 1 2 2v5H0V2a2 2 0 0 1 2-2z"}),wp.element.createElement(s,{fillRule:"nonzero",transform:"translate(3 12)"},wp.element.createElement(f,{width:"14",height:"5",fill:c.b.primary,rx:"1"}),wp.element.createElement(f,{width:"5.6",height:"1",x:"1.4",y:"2",fill:"#FFF",rx:".5"}),wp.element.createElement(f,{width:"4",height:"1",x:"8.6",y:"2",fill:"#FFF",rx:".5"})),wp.element.createElement(s,{fill:"#DBE3E8",fillRule:"nonzero",transform:"translate(3 9)"},wp.element.createElement(f,{width:"3",height:"1",rx:".5"}),wp.element.createElement(f,{width:"2",height:"1",x:"4",rx:".5"}),wp.element.createElement(f,{width:"3",height:"1",x:"7",rx:".5"}),wp.element.createElement(f,{width:"3",height:"1",x:"11",rx:".5"})))),attributes:i.a,transforms:{to:[{type:"block",blocks:["selz/button"],transform:function(e){var t=(e.description,r(e,["description"])),n=w("selz/button"),o=n.autoWidth,i=n.type,a=n.width;return m("selz/button",Object.assign({},t,{autoWidth:o,type:i,width:a}))}}]},edit:a.a,save:function(e){return wp.element.createElement(o.a,e)},deprecated:[{attributes:i.a,save:function(e){return wp.element.createElement(o.a,l({},e,{deprecated:!0}))}}]}}},function(e,t,n){"use strict";var r=n(0),o=r.a[0],i=o.label,a=o.text,c=o.value,l=a||i,u=r.b.primary,s=r.b.white;t.a={_text:{type:"string",default:l},_width:{type:"number",default:320},action:{type:"string",default:c},buttonBackgroundColor:{type:"string",default:u},buttonTextColor:{type:"string",default:s},checkoutBackgroundColor:{type:"string",default:u},checkoutTextColor:{type:"string",default:s},currentPage:{type:"number"},description:{type:"boolean",default:!0},error:{type:"object"},fluidWidth:{type:"boolean",default:!1},hasMore:{type:"boolean"},isLoading:{type:"boolean",default:!0},logos:{type:"boolean",default:!1},modal:{type:"boolean",default:!0},pages:{type:"object"},products:{type:"array"},query:{type:"string",default:""},request:{type:"object"},showCart:{type:"boolean",default:!1},text:{type:"string",default:l},textWasSet:{type:"boolean",default:!1},type:{type:"string",default:"widget"},url:{type:"string"},useDefaultText:{type:"boolean",default:!1},width:{type:"string",default:320}}},function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function o(e){var t=e.openGeneralSidebar,n=r(e,["openGeneralSidebar"]);return wp.element.createElement(w,null,wp.element.createElement(u.a,f({},n,{openGeneralSidebar:t,isPreview:!0})),wp.element.createElement(h,null,wp.element.createElement(s.a,n),wp.element.createElement(i.a,n),wp.element.createElement(p.a,n),wp.element.createElement(l.a,n),wp.element.createElement(a.a,n),wp.element.createElement(c.a,n)))}var i=n(3),a=n(4),c=n(5),l=n(6),u=n(1),s=n(8),p=n(11),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=wp.blockEditor||wp.editor,h=d.InspectorControls,m=wp.data.withDispatch,w=wp.element.Fragment;t.a=m(function(e){return{openGeneralSidebar:e("core/edit-post").openGeneralSidebar}})(o)},function(e,t){},function(e,t){}]);