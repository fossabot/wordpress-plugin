function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){var i=Math.max,n=Math.abs;if(null==this)throw new TypeError('"this" is null or not defined');var o,a,s=Object(this),d=s.length>>>0;if(0===d)return!1;for(var r=0|t,l=i(0<=r?r:d-n(r),0);l<d;){if((o=s[l])===(a=e)||"number"==typeof o&&"number"==typeof a&&isNaN(o)&&isNaN(a))return!0;l++}return!1}}),function(r){function l(e,t){var i,n,o,a,s=e.data("ddslick"),d=e.find(".dd-selected"),r=d.siblings(".dd-selected-value"),l=(e.find(".dd-options"),d.siblings(".dd-pointer"),e.find(".dd-option").eq(t)),c=l.closest("li"),u=s.settings,h=s.settings.data[t];e.find(".dd-option").removeClass("dd-option-selected"),l.addClass("dd-option-selected"),s.selectedIndex=t,s.selectedItem=c,s.selectedData=h,u.showSelectedHTML?d.html((h.imageSrc?'<img class="dd-selected-image'+("right"==u.imagePosition?" dd-image-right":"")+'" src="'+h.imageSrc+'" />':"")+(h.text?'<label class="dd-selected-text">'+h.text+"</label>":"")+(h.description?'<small class="dd-selected-description dd-desc'+(u.truncateDescription?" dd-selected-description-truncated":"")+'" >'+h.description+"</small>":"")):d.html(h.text),r.val(h.value),s.original.val(h.value),e.data("ddslick",s),p(e),n=(i=e).find(".dd-select").css("height"),o=i.find(".dd-selected-description"),a=i.find(".dd-selected-image"),o.length<=0&&0<a.length&&i.find(".dd-selected-text").css("lineHeight",n),"function"==typeof u.onSelected&&u.onSelected.call(this,s)}function c(e){var o,t=e.find(".dd-select"),i=t.siblings(".dd-options"),n=t.find(".dd-pointer"),a=i.is(":visible");r(".dd-click-off-close").not(i).slideUp(50),r(".dd-pointer").removeClass("dd-pointer-up"),t.removeClass("dd-open"),a?(i.slideUp("fast"),n.removeClass("dd-pointer-up"),t.removeClass("dd-open")):(t.addClass("dd-open"),i.slideDown("fast"),n.addClass("dd-pointer-up")),(o=e).find(".dd-option").each(function(){var e=r(this),t=e.css("height"),i=e.find(".dd-option-description"),n=o.find(".dd-option-image");i.length<=0&&0<n.length&&e.find(".dd-option-text").css("lineHeight",t)})}function p(e){e.find(".dd-select").removeClass("dd-open"),e.find(".dd-options").slideUp(50),e.find(".dd-pointer").removeClass("dd-pointer-up").removeClass("dd-pointer-up")}r.fn.ddslick=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==_typeof(e)&&e?void r.error("Method "+e+" does not exists."):t.init.apply(this,arguments)};var t={},u={data:[],keepJSONItemsOnTop:!1,width:"100%",height:null,background:"#fff",selectText:"",defaultSelectedIndex:null,truncateDescription:!0,imagePosition:"left",showSelectedHTML:!0,clickOffToClose:!0,embedCSS:!0,onSelected:function(){}};t.init=function(d){var e=r.extend({},u,d);return r("#css-ddslick").length<=0&&e.embedCSS&&r('<style id="css-ddslick" type="text/css">.dd-select{ border-radius:4px; box-shadow:0 1px 1px rgba(0,0,0,.05);border:solid 1px #dbe3e8; position:relative; cursor:pointer;}.dd-desc { color:#aaa; display:block; overflow: hidden; font-weight:normal; line-height: 1.4em; }.dd-selected {overflow: hidden;display: block;padding: 0;color: #333b3f !important;border-bottom: none !important;}.dd-selected-text, .dd-option-text {margin: 0 !important;line-height:44px !important}.dd-pointer{ width:0; height:0; position:absolute; right:10px; top:50%; margin-top:-3px;}.dd-pointer-down{ border:solid 5px transparent; border-top:solid 5px #000; }.dd-pointer-up{border:solid 5px transparent !important; border-bottom:solid 5px #000 !important; margin-top:-8px;}.dd-options{ border:solid 1px #dbe3e8; list-style:none; box-shadow:0px 3px 5px #bbb; display:none; position:absolute; z-index:2000; margin:2px 0 0 0; padding:0;background:#fff; overflow:auto;border-radius: 4px;}.dd-option{ color:#333b3f !important;padding:0; display:block; border-bottom:solid 1px #ddd; overflow:hidden; text-decoration:none; cursor:pointer;-webkit-transition: all 0.25s ease-in-out; -moz-transition: all 0.25s ease-in-out;-o-transition: all 0.25s ease-in-out;-ms-transition: all 0.25s ease-in-out; }.dd-options > li{ margin:0}.dd-options > li:last-child > .dd-option{ border-bottom:none;}.dd-option:hover{ background:#f9f9f9;border-bottom:1px solid #aaa !important}.dd-selected-description-truncated { text-overflow: ellipsis; white-space:nowrap; }.dd-option-selected { background:#fff; }.dd-option-image, .dd-selected-image { vertical-align:middle; float:left; margin:5px 5px 5px 4px; max-width:64px;}.dd-image-right { float:right; margin-right:15px; margin-left:5px;}.dd-container{ position:relative;}​ .dd-selected-text {}​</style>').appendTo("head"),this.each(function(){var i=r.extend({},u,d),e=r(this);if(!e.data("ddslick")){var n=[];i.data;e.find("option").each(function(){var e=r(this),t=e.data();n.push({text:r.trim(e.text()),value:e.val(),selected:e.is(":selected"),description:t.description,imageSrc:t.imagesrc})}),i.keepJSONItemsOnTop?r.merge(i.data,n):i.data=r.merge(n,i.data);var t=e,o=r("<div/>",{id:e.attr("id")+"-dd-placeholder"});e.replaceWith(o),(e=o).addClass("dd-container").append('<div class="dd-select"><input class="dd-selected-value" type="hidden" /><a class="dd-selected"></a><span class="dd-pointer dd-pointer-down"></span></div>').append('<ul class="dd-options"></ul>'),e.find("input.dd-selected-value").attr("id",r(t).attr("id")).attr("name",r(t).attr("name"));n=e.find(".dd-select");var a=e.find(".dd-options");if(a.css({width:i.width}),n.css({width:i.width,background:i.background}),e.css({width:i.width}),null!=i.height&&a.css({height:i.height,overflow:"auto"}),r.each(i.data,function(e,t){t.selected&&(i.defaultSelectedIndex=e),a.append('<li><a class="dd-option">'+(t.value?' <input class="dd-option-value" type="hidden" value="'+t.value+'" />':"")+(t.imageSrc?' <img class="dd-option-image'+("right"==i.imagePosition?" dd-image-right":"")+'" src="'+t.imageSrc+'" />':"")+(t.text?' <label class="dd-option-text">'+t.text+"</label>":"")+(t.description?' <small class="dd-option-description dd-desc">'+t.description+"</small>":"")+"</a></li>")}),e.data("ddslick",{settings:i,original:t,selectedIndex:-1,selectedItem:null,selectedData:null}),0<i.selectText.length&&null==i.defaultSelectedIndex)e.find(".dd-selected").html(i.selectText);else{var s=null!=i.defaultSelectedIndex&&0<=i.defaultSelectedIndex&&i.defaultSelectedIndex<i.data.length?i.defaultSelectedIndex:0;l(e,s)}e.find(".dd-select").on("click.ddslick",function(){c(e)}),e.find(".dd-option").on("click.ddslick",function(){l(e,r(this).closest("li").index())}),i.clickOffToClose&&(a.addClass("dd-click-off-close"),e.on("click.ddslick",function(e){e.stopPropagation()}),r("body").on("click",function(){r(".dd-open").removeClass("dd-open"),r(".dd-click-off-close").slideUp(50).siblings(".dd-select").find(".dd-pointer").removeClass("dd-pointer-up")}))}})},t.select=function(i){return this.each(function(){var e,t;void 0!==i.index&&l(r(this),i.index),i.id&&(e=r(this),t=i.id,l(e,e.find(".dd-option-value[value= '"+t+"']").parents("li").prevAll().length))})},t.open=function(){return this.each(function(){var e=r(this);e.data("ddslick")&&c(e)})},t.close=function(){return this.each(function(){var e=r(this);e.data("ddslick")&&p(e)})},t.destroy=function(){return this.each(function(){var e=r(this),t=e.data("ddslick");if(t){var i=t.original;e.removeData("ddslick").unbind(".ddslick").replaceWith(i)}})}}(jQuery),document.addEventListener("DOMContentLoaded",function(){function i(){this.style.setProperty("--value","".concat(function(){var e=this.max||100,t=this.min||0;return(this.value-t)/(e-t)*100}.call(this),"%"))}function n(t){"function"==typeof t.set||(i.call(t),e.forEach(function(e){t.addEventListener(e,i,!1)}),Object.defineProperty(t,"set",{value:function(e){null!==e&&"number"==typeof e&&(this.value=e),i.call(this)}}))}function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:document.body,t='input[type="range"]';e instanceof HTMLElement&&(e.matches(t)&&(e=e.parentNode),Array.from(e.querySelectorAll(t)).forEach(n))}if("WebkitAppearance"in document.documentElement.style&&Array.from){var e=["input","change","update"];new MutationObserver(function(e){e.forEach(function(e){e.addedNodes.forEach(function(e){t(e)})})}).observe(document.body,{childList:!0,subtree:!0}),t()}}),function(i){i&&(i.expr.filters.loaded=function(e){var t=i(e);if(t.is("img"))return e.complete||"complete"===e.readyState||4===e.readyState||0!==e.naturalHeight;if(t.is("iframe"))try{return"complete"===(e.contentDocument||e.contentWindow.document).readyState}catch(e){return!1}return!1})}(jQuery),document.addEventListener("focusout",function(e){e.target.classList.remove("tab-focus")}),document.addEventListener("keydown",function(e){9!==e.keyCode||window.setTimeout(function(){document.activeElement.classList.add("tab-focus")},0)}),function(r){function i(e,t){t?e.removeAttr("hidden"):e.attr("hidden","")}var e=function(){"use strict";function t(e){_classCallCheck(this,t),this.$element=r(".selz-modal"),this.$backdrop=r(".selz-modal-backdrop"),this.$controls=r(".selz-modal-controls"),this.$close=r('[data-modal="close"]'),this.$form=this.$element.find("form"),this.$submit=this.$form.find(":submit"),this.loading=!1,this.shown=!1,this.show(e),this.listeners()}return _createClass(t,[{key:"enforceFocus",value:function(){var t=this;r(document).off("focusin.modal").on("focusin.modal",function(e){t.$element[0]===e.target||t.$element.has(e.target).length||t.$element.trigger("focus")})}},{key:"listeners",value:function(){var e=this;this.$form.on("input change click",function(){return e.checkValidity()}),this.$form.on("input change",'input[type="range"]',function(e){var t=r(e.target);r('output[for="'.concat(t.attr("id"),'"]')).prop("value",t.val())})}},{key:"checkValidity",value:function(){var e=!(!this.$form.get(0).checkValidity()||!this.$form.find('[name="link"]:checked').length);this.$submit.prop("disabled",!e)}},{key:"hide",value:function(){this.shown&&(this.shown=!1,i(this.$backdrop,this.shown),i(this.$element,this.shown),r(document).off("focusin.modal").off("keyup.hide.modal"),this.$form.off("change.type.modal").off("submit.modal"),this.$element.trigger("hidden.modal"))}},{key:"show",value:function(e){var t=this;!window.wpActiveEditor||this.shown||(r(".selz-modal-controls .js-tab-container").html(),r(".selz-modal-controls").html('\n                <div class="text-center padding-6">\n                    <span class="loader" aria-hidden="true"></span>\n                    <p class="margin-0 margin-top-2">Loading&hellip;</p>\n                </div>\n            '),r("<input>").attr({type:"hidden",name:"kind",value:e}).appendTo(this.$form),this.shown=!0,i(this.$backdrop,this.shown),i(this.$element,this.shown),this.$close.focus(),this.update(),this.$close.on("click.hide.modal",function(e){e.preventDefault(),t.hide()}),this.$form.on("change.type.modal",'select[name="type"]',function(){t.update()}),this.$form.on("submit.modal",function(e){e.preventDefault(),t.insert()}),r(document).on("keyup.hide.modal",function(e){27===e.keyCode&&t.hide()}),this.$element.trigger("shown.modal"),this.enforceFocus())}},{key:"insert",value:function(){if(window.tinymce){var e=window.tinymce.get(window.wpActiveEditor),d="";this.hide();r("input, select, textarea",this.$form).each(function(e,t){var i=r(t),n=i.attr("id"),o=i.attr("name"),a=i.val();if(n||o)if(n||(n=o),i.is(":checkbox")){var s=i.prop("checked");d+=" ".concat(n,'="').concat(s,'"')}else i.is(":radio")?i.is(":checked")&&(d+=" ".concat(n,'="').concat(a,'"')):a&&(d+=" ".concat(n,'="').concat(a,'"'))});var t="[".concat(window.selzvars.slug).concat(d,"]");e&&(window.tinymce.execCommand("mceBeginUndoLevel"),window.tinymce.execCommand("mceInsertContent",!1,t),window.tinymce.execCommand("mceEndUndoLevel")),window.edInsertContent("",t)}}},{key:"update",value:function(){var t=this,e=window.ajaxurl;this.loading||"string"!==r.type(e)||!e.length||(this.loading=!0,this.$submit.prop("disabled",!0),r.post(e,{action:window.selzvars.action,nonce:window.selzvars.nonce,data:this.$form.serialize()},function(e){t.$controls.html(e),t.loading=!1,t.checkValidity(),t.$element.trigger("updated.modal")}))}}]),t}();window.SelzModal=e}(jQuery),function(o){function e(){o(".widgets-sortables > div").each(function(e,t){var i=o(t).attr("id");void 0!==i&&-1!==i.indexOf("selz")&&new n(i)})}var n=function(){"use strict";function t(e){_classCallCheck(this,t),this.$element=o("#".concat(e)),this.$controls=o(".selz-widget-controls"),this.$form=this.$element.find("form"),this.$type=this.$form.find(".widget-type select"),this.loading=!1,this.show()}return _createClass(t,[{key:"show",value:function(){var e=this;this.update(this.$type.val()),this.$type.on("change",function(){e.update(e.$type.val())})}},{key:"update",value:function(n){this.$form.find(".control-group").each(function(e,t){var i=o(t).data("type");o(t).toggle(!i||-1!==i.indexOf(n))})}}]),t}();window.SelzWidget=n,o(document).ready(function(){e()}),o(document).on("widget-added widget-updated",function(){e()})}(jQuery),function(n){function e(){n(".js-color-picker:not(.has-colorpicker)").addClass("has-colorpicker").wpColorPicker().removeClass("wp-color-picker")}function o(e){var t=e.parents(".js-tab-container"),i=n("#".concat(e.attr("aria-controls")));n("[role='tab']",t).attr("aria-selected","false"),e.attr("aria-selected","true"),n("[role='tabpanel']",t).attr("aria-hidden","true"),i.attr("aria-hidden","false")}function t(e){e.preventDefault(),o(n(this))}function i(e){if([37,39].includes(e.which)){var t=n(this);if("true"===t.attr("aria-selected")){var i=t.parent("li")[39===e.which?"next":"prev"]("li").find("[role='tab']");i&&(i.focus(),o(i))}}}function a(){n(".js-tab-container [role='tab']").on("click",t).on("keydown",i)}n(document).ready(e).ready(a).ajaxComplete(e).ajaxComplete(a)}(jQuery),function(o){window.selzvars;var a=function(){},t=function(){"use strict";function n(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a,i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a;_classCallCheck(this,n),this.request=e,this.timestamp=Date.now(),this.callback=t,this.fail=i}return _createClass(n,[{key:"send",value:function(){var n=this;o.ajax(this.request).then(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.callback.apply(n,[n].concat(t))}).fail(function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n.fail.apply(n,[n].concat(t))})}}]),n}(),e=function e(t,i,n){"use strict";_classCallCheck(this,e),this.number=t,this.start=i,this.end=n},i=function(){"use strict";function i(e,t){_classCallCheck(this,i),(this.$element=e).addClass("product-list--built"),this.$list=e.find(".product-list"),this.$search=e.find('[type="search"]'),this.$pager=e.find(".product-pager"),this.$previous=this.$pager.find('[data-page="previous"]'),this.$next=this.$pager.find('[data-page="next"]'),this.searchTimer=null,this.inputName=e.data("input-name"),this.request=null,this.resetPager(),this.query=null,this.last=null,this.config=o.extend(!0,{limit:50,classNames:{landscape:"is-landscape",portrait:"is-portrait",square:"is-square",loading:"is-loading"}},t),this.listeners()}return _createClass(i,[{key:"listeners",value:function(){var t=this;this.$search.on("input",function(e){window.clearTimeout(t.searchTimer),t.searchTimer=window.setTimeout(function(){t.query=o(e.target).val(),t.resetPager(),t.fetch()},500)}),this.$previous.on("click",function(){return t.previous()}),this.$next.on("click",function(){return t.next()})}},{key:"loadImages",value:function(){var a=this,n=function(e){return e.addClass((t=e,i=t.get(0),n=i.naturalWidth,o=i.naturalHeight,n&&o?o<n?a.config.classNames.landscape:n<o?a.config.classNames.portrait:o===n?a.config.classNames.square:"":"")).removeClass(a.config.classNames.loading);var t,i,n,o};this.$list.find("img").each(function(e,t){var i=o(t);i.is(":loaded")?n(i):i.on("load error",function(){return n(i)})})}},{key:"map",value:function(e){var n=this;return e&&e.length?e.map(function(e){var t;t=e.featured_image?e.featured_image.small:"https://placehold.it/100x100";var i=n.config.classNames.loading;return'\n                        <li>\n                            <label class="product-list-item">\n                                <input type="radio" name="'.concat(n.inputName,'" value="').concat(e.short_url,'" required>\n                                <span class="').concat("media-ratio-1-1 media-placeholder product-image",'" role="presentation">\n                                    <img src=\'').concat(t,"' alt='' class=\"").concat(i,'">\n                                </span>\n                                <span class="product-info">\n                                    ').concat(e.title,"\n                                    \x3c!-- ").concat(e.price&&"<small>".concat(e.price,"</small>")," --\x3e\n                                </span>\n                            </button>\n                        </li>\n                    ")}).join(""):'<li class="padding-6 text-center color-light">No results</li>'}},{key:"render",value:function(){this.$list.html(this.map(this.products)),this.loadImages(),this.$pager.attr("hidden",!this.hasMore&&1===this.page.number),this.$next.attr("disabled",!this.hasMore),this.$previous.attr("disabled",1===this.page.number)}},{key:"previous",value:function(){var e=this.pages[this.page.number-1];e&&(this.start=e.start,this.page=e,this.fetch())}},{key:"next",value:function(){this.start=this.page.end,this.page=new e(this.page.number+1),this.fetch()}},{key:"resetPager",value:function(){this.start=null,this.page=new e(1),this.pages={},this.hasMore=!1}},{key:"fetch",value:function(){var i=this,e=window.ajaxurl;"string"===o.type(e)&&e.length&&(this.$list.html('\n                <li class="padding-6 text-center">\n                    <span class="loader" aria-hidden="true"></span>\n                    <p class="margin-0 margin-top-2 color-light">Loading&hellip;</p>\n                <li>\n            '),this.$pager.attr("hidden",!0),this.request=new t({url:e,method:"GET",dataType:"json",data:{action:this.searching?"selz_search_products":"selz_get_products",starting_after:this.start,page:this.page.number,q:this.query}},function(e,t){e.timestamp!==i.request.timestamp||(i.products=t.data,i.hasMore=t.has_more,i.products&&i.products.length&&(i.page.start=i.products[0].id,i.page.end=i.products[i.products.length-1].id),i.pages[i.page.number]=i.page,i.render())},function(){i.$list.html('<li class="padding-6 text-center color-light">Failed to load products. Please try again.</li>')}),this.request.send())}},{key:"searching",get:function(){return!("string"!==o.type(this.query)||!this.query.length)}}]),i}(),n=".js-product-list",s=function(e){e.hasClass("product-list--built")||new i(e).fetch()};new MutationObserver(function(e){Array.from(e).forEach(function(e){Array.from(e.addedNodes).forEach(function(e){var t=o(e);t.is(n)?s(t):0<t.find(n).length&&t.find(n).each(function(e,t){s(o(t))})})})}).observe(document,{childList:!0,subtree:!0})}(jQuery);